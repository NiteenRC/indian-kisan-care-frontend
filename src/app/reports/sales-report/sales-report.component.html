<table [dataSource]="dataSource" class="mat-elevation-z8" mat-table>
  <ng-container matColumnDef="salesOrderID">
    <th *matHeaderCellDef mat-header-cell>Sales Order ID</th>
    <td *matCellDef="let element; let i=index" mat-cell>
      <ng-template #test>
        <table [dataSource]="dataSource[i]?.salesOrderDetail" mat-table class="mat-elevation-z2">
          <ng-container matColumnDef="id">
            <th *matHeaderCellDef mat-header-cell>ID</th>
            <td *matCellDef="let element" mat-cell>
              {{element.product?.id}}
            </td>
          </ng-container>

          <ng-container matColumnDef="productName">
            <th *matHeaderCellDef mat-header-cell>Product Name</th>
            <td *matCellDef="let element" mat-cell> {{element.product?.productName}} </td>
          </ng-container>

          <ng-container matColumnDef="salesPrice">
            <th *matHeaderCellDef mat-header-cell class="text-right">Sales Price</th>
            <td *matCellDef="let element" mat-cell class="text-right"> {{element.price}} </td>
          </ng-container>

          <ng-container matColumnDef="qtyOrdered">
            <th *matHeaderCellDef mat-header-cell class="text-right">Order Qty</th>
            <td *matCellDef="let element" mat-cell class="text-right"> {{element.qtyOrdered}} </td>
          </ng-container>

          <tr *matHeaderRowDef="productColumns;  sticky: true" mat-header-row></tr>
          <tr *matRowDef="let row; columns: productColumns;" mat-row></tr>
        </table>
      </ng-template>

      <button type="button" class="btn" [ngbPopover]="test" [placement]="['right', 'auto']"
        triggers="mouseenter:mouseleave">
        {{element.salesOrderID}}
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="customerName">
    <th *matHeaderCellDef mat-header-cell>Customer</th>
    <td *matCellDef="let element" mat-cell> {{element.customer?.customerName}} </td>
  </ng-container>

  <ng-container matColumnDef="amountPaid">
    <th *matHeaderCellDef mat-header-cell class="text-right">Amount Paid</th>
    <td *matCellDef="let element" mat-cell class="text-right"> {{element.amountPaid}} </td>
  </ng-container>

  <ng-container matColumnDef="totalPrice">
    <th *matHeaderCellDef mat-header-cell class="text-right pr-4">Total Price</th>
    <td *matCellDef="let element" mat-cell class="text-right pr-4"> {{element.totalPrice}} </td>
  </ng-container>

  <ng-container matColumnDef="createdDate">
    <th *matHeaderCellDef mat-header-cell>Created Date</th>
    <td *matCellDef="let element" mat-cell> {{element.createdDate}} </td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th *matHeaderCellDef mat-header-cell>Status</th>
    <td *matCellDef="let element" mat-cell> {{element.status}} </td>
  </ng-container>

  <ng-container matColumnDef="totalQty">
    <th *matHeaderCellDef mat-header-cell class="text-right">Total Qty</th>
    <td *matCellDef="let element" mat-cell class="text-right"> {{element.totalQty}} </td>
  </ng-container>

  <tr *matHeaderRowDef="displayedColumns;  sticky: true" mat-header-row></tr>
  <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
</table>